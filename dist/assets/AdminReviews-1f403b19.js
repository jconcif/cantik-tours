import{r as e,j as a,al as r,o as t,L as s,ai as i,am as n,an as l}from"./vendor-570dc6e0.js";import{u as o}from"./i18n-35f692ac.js";import{m as d}from"./framer-motion-d63863c1.js";const c=()=>{const{i18n:c}=o(),[m,x]=e.useState(!1),[p,b]=e.useState(""),[u,g]=e.useState([]),[h,y]=e.useState(!1),[f,j]=e.useState(null),N=async()=>{y(!0);try{const e=await fetch(`/api/admin_get_reviews.php?token=${p}`,{headers:{Authorization:p}}),a=await e.json();"success"===a.status?(g(a.data),x(!0)):j({type:"error",text:a.message})}catch(e){j({type:"error",text:"Error de conexi칩n"})}finally{y(!1)}},v=async(e,a)=>{try{const r=await fetch("/api/admin_update_review.php",{method:"POST",headers:{Authorization:p,"Content-Type":"application/json"},body:JSON.stringify({id:e,token:p,...a})});"success"===(await r.json()).status&&(j({type:"success",text:"Rese침a actualizada"}),N())}catch(r){j({type:"error",text:"Error al actualizar"})}};return m?a.jsx("div",{className:"min-h-screen bg-bg-light dark:bg-bg-dark pt-32 pb-24 px-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-12",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-black mb-2",children:"Gesti칩n de Rese침as"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Administra y aprueba los comentarios de los clientes"})]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"text-sm font-bold text-primary hover:underline",children:"Cerrar Sesi칩n"})]}),f&&a.jsx("div",{className:"mb-8 p-4 rounded-xl text-center font-bold "+("success"===f.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:f.text}),a.jsx("div",{className:"grid gap-6",children:u.map(e=>a.jsxs(d.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-white/5 p-6 rounded-[2rem] border border-black/5 flex flex-col md:flex-row gap-8 items-start md:items-center shadow-lg",children:[a.jsx("div",{className:"w-20 h-20 rounded-2xl bg-primary/10 flex items-center justify-center text-primary font-black text-2xl shrink-0 border-2 border-primary/5",children:e.nombre?e.nombre[0].toUpperCase():"U"}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-black",children:e.nombre}),a.jsxs("span",{className:"px-3 py-1 bg-primary/10 text-primary text-xs font-bold rounded-full uppercase flex items-center gap-2",children:[{ar:"游뷣릖",cl:"游뻟릖",co:"游뻟릖",es:"游쀯릖",mx:"游쓇릖",pe:"游왫릖",uy:"游쥟릖",us:"游쥟릖"}[e.pais]||"游깷",e.tour_id]})]}),a.jsx("div",{className:"flex gap-1 text-yellow-400 mb-3",children:[...Array(5)].map((r,s)=>a.jsx(t,{size:14,fill:s<e.estrellas?"currentColor":"transparent"},s))}),a.jsxs("div",{className:"mt-8 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400 tracking-widest flex items-center gap-2",children:"Original (ES)"}),a.jsx("textarea",{id:`orig-${e.id}`,className:"w-full p-4 bg-gray-50 dark:bg-white/5 border border-black/5 rounded-xl text-sm outline-none focus:ring-1 focus:ring-primary h-24 italic",defaultValue:e.comentario||"",placeholder:"Comentario original..."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black uppercase text-pink-500 tracking-widest flex items-center gap-2",children:[a.jsx(s,{size:12}),"en"===(null==c?void 0:c.language)?"Translation (EN)":"Traducci칩n (EN)"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("textarea",{id:`trans-${e.id}`,className:"w-full p-4 bg-gray-50 dark:bg-white/5 border border-black/5 rounded-xl text-sm outline-none focus:ring-1 focus:ring-primary h-24 italic",defaultValue:e.comentario_en||"",placeholder:"Traduce el comentario aqu칤..."}),a.jsx("button",{onClick:()=>{const a=document.getElementById(`orig-${e.id}`).value,r=document.getElementById(`trans-${e.id}`).value;v(e.id,{aprobado:e.aprobado,comentario:a,comentario_en:r})},className:"self-end p-4 bg-primary/10 text-primary rounded-xl hover:bg-primary hover:text-white transition-all shadow-sm",title:"Guardar Cambios",children:a.jsx(i,{size:20})})]})]})]}),e.ig_user&&a.jsxs("p",{className:"text-xs text-primary font-bold mt-2",children:["IG: @",e.ig_user.replace("@","")]}),a.jsxs("div",{className:"inline-flex items-center gap-2 mt-4 px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-wider "+(1==e.autorizacion_fotos?"bg-blue-50 text-blue-600 border border-blue-100":"bg-red-50 text-red-600 border border-red-100"),children:[a.jsx(i,{size:12}),1==e.autorizacion_fotos?"Autoriza Web/Redes":"No Autoriza Redes"]})]}),a.jsx("div",{className:"flex gap-3 shrink-0",children:a.jsx("button",{onClick:()=>{const a=document.getElementById(`orig-${e.id}`).value,r=document.getElementById(`trans-${e.id}`).value,t="1"===e.aprobado||1===e.aprobado?0:1;v(e.id,{aprobado:t,comentario:a,comentario_en:r})},className:"flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all "+("1"===e.aprobado||1===e.aprobado?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"),children:"1"===e.aprobado||1===e.aprobado?a.jsxs(a.Fragment,{children:[a.jsx(n,{size:18})," Ocultar"]}):a.jsxs(a.Fragment,{children:[a.jsx(l,{size:18})," Visualizar"]})})})]},e.id))}),0===u.length&&!h&&a.jsx("div",{className:"text-center py-24 bg-gray-50 dark:bg-white/5 rounded-[3rem] border border-dashed border-gray-200 dark:border-white/10",children:a.jsx("p",{className:"text-gray-400 font-medium",children:"No hay rese침as para gestionar a칰n"})})]})}):a.jsx("div",{className:"min-h-screen bg-bg-light dark:bg-bg-dark pt-32 px-6 flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-white/5 p-8 rounded-[2.5rem] border border-black/5 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-primary/10 text-primary rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(r,{size:32})}),a.jsx("h1",{className:"text-2xl font-black",children:"Panel de Control"}),a.jsx("p",{className:"text-gray-500",children:"Introduce la contrase침a de administrador"})]}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),N()},className:"space-y-4",children:[a.jsx("input",{type:"password",className:"w-full px-6 py-4 bg-gray-50 dark:bg-white/5 border border-black/10 rounded-2xl outline-none focus:ring-2 focus:ring-primary",placeholder:"Contrase침a",value:p,onChange:e=>b(e.target.value)}),a.jsx("button",{className:"btn-primary w-full py-4 text-lg font-bold",children:"Entrar"})]}),f&&a.jsx("p",{className:"mt-4 text-center text-red-500 font-medium",children:f.text})]})})};export{c as default};
