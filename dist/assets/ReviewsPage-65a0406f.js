import{r as e,j as r,ah as a,I as t,p as s,ai as i,aj as l}from"./vendor-8ce8e5b0.js";import{S as n}from"./index-2daafd7d.js";import{u as o}from"./i18n-489db8a9.js";import{m as d}from"./framer-motion-a372b125.js";import"./react-router-8dd70952.js";const c=()=>{const{t:c,i18n:m}=o(),[x,p]=e.useState("idle"),[h,g]=e.useState(5),[u,b]=e.useState(0),[v,y]=e.useState([]),[j,f]=e.useState(!0),[w,N]=e.useState({name:"",tour_type:"ubud_central",comment:"",ig_user:"",country:"es",auth:!1});e.useEffect(()=>{(async()=>{try{const e=await fetch("/api/get_reviews.php"),r=await e.json();"success"===r.status&&r.data&&y(r.data.map(e=>({name:e.nombre,text:e.comentario,text_en:e.comentario_en,stars:parseInt(e.estrellas),image:e.foto_url,country:e.pais,ig_user:e.ig_user,authorized:"1"===e.autorizacion_fotos||1===e.autorizacion_fotos})))}catch(e){}finally{f(!1)}})()},[]);const k="w-full px-6 py-4 bg-white dark:bg-white/5 border border-black/10 dark:border-white/10 rounded-2xl focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all placeholder:text-gray-400 font-medium",_="block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2 ml-1";return"success"===x?r.jsxs("div",{className:"bg-bg-light dark:bg-bg-dark min-h-screen pt-32 pb-24 px-6",children:[r.jsx(n,{title:c("seo.reviews.title"),description:c("seo.reviews.description")}),r.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[r.jsx(d.div,{initial:{scale:0},animate:{scale:1},className:"w-24 h-24 bg-green-100 dark:bg-green-500/20 text-green-600 dark:text-green-400 rounded-full flex items-center justify-center mx-auto mb-8",children:r.jsx(a,{size:48})}),r.jsx("h1",{className:"text-4xl font-black mb-4",children:c("reviews_page.form.success_title")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg mb-12",children:c("reviews_page.form.success_text")}),r.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto",children:[r.jsxs("div",{className:"bg-primary/5 dark:bg-primary/10 p-8 rounded-[2.5rem] border border-primary/20",children:[r.jsx("p",{className:"text-gray-900 dark:text-white font-bold text-lg mb-6",children:c("reviews_page.form.ig_follow_text")}),r.jsxs("a",{href:"https://instagram.com/cantiktours",target:"_blank",rel:"noopener noreferrer",className:"btn-primary inline-flex items-center gap-3 px-8 py-4 text-base",children:[r.jsx(t,{size:20}),c("reviews_page.form.ig_follow_btn")]})]}),r.jsx("div",{className:"bg-white/50 dark:bg-white/5 p-8 rounded-[2.5rem] border border-black/5 dark:border-white/5",children:r.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium text-sm",children:c("reviews_page.form.wsp_groups_text")})})]})]})]}):r.jsxs("div",{className:"bg-bg-light dark:bg-bg-dark min-h-screen pt-32 pb-24 px-6 relative overflow-hidden",children:[r.jsx(n,{title:c("seo.reviews.title"),description:c("seo.reviews.description")}),r.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[120px] -translate-y-1/2 translate-x-1/2 pointer-events-none"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-blue-500/5 rounded-full blur-[100px] translate-y-1/2 -translate-x-1/2 pointer-events-none"}),r.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[r.jsxs("div",{className:"text-center mb-20",children:[r.jsxs(d.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-7xl font-black mb-8 leading-tight",children:[c("reviews_page.title")," ",r.jsx("span",{className:"text-primary italic",children:c("reviews_page.title_accent")})]}),r.jsx(d.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-gray-600 dark:text-gray-400 text-lg md:text-2xl font-medium max-w-3xl mx-auto",children:c("reviews_page.subtitle")})]}),r.jsxs("div",{className:"grid lg:grid-cols-5 gap-16",children:[r.jsxs("div",{className:"lg:col-span-3 space-y-8 order-2 lg:order-1",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[r.jsx("h2",{className:"text-2xl font-black",children:m.language.startsWith("es")?"Experiencias Recientes":"Recent Experiences"}),r.jsx("div",{className:"flex-1 h-px bg-gray-100 dark:bg-white/5"})]}),j?r.jsx("div",{className:"flex flex-col gap-6",children:[1,2,3].map(e=>r.jsx("div",{className:"h-48 bg-white dark:bg-white/5 rounded-[2.5rem] animate-pulse"},e))}):v.length>0?r.jsx("div",{className:"grid gap-8",children:v.map((e,a)=>r.jsxs(d.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"bg-white dark:bg-white/5 border border-black/5 dark:border-white/5 p-8 rounded-[2.5rem] shadow-xl shadow-gray-200/50 dark:shadow-none hover:-translate-y-1 transition-all duration-300 group",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/10 flex items-center justify-center text-primary font-black text-2xl border-2 border-primary/5 shrink-0",children:e.name?e.name[0].toUpperCase():"U"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:e.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.country&&(()=>{const a={ar:"üá¶üá∑",cl:"üá®üá±",co:"üá®üá¥",es:"üá™üá∏",mx:"üá≤üáΩ",pe:"üáµüá™",uy:"üá∫üáæ",us:"üá∫üá∏"}[e.country]||"üåê",t=c(`reviews_page.form.countries.${e.country}`);return r.jsxs("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:[a," ",t]})})(),e.ig_user&&e.authorized&&r.jsxs("span",{className:"text-[10px] font-bold text-pink-500 bg-pink-50 dark:bg-pink-500/10 px-2 py-0.5 rounded-lg border border-pink-100 dark:border-pink-500/20",children:["@",e.ig_user.replace("@","")]})]})]})]}),r.jsx("div",{className:"flex gap-0.5 text-yellow-400",children:[...Array(5)].map((a,t)=>r.jsx(s,{size:16,fill:t<e.stars?"currentColor":"transparent"},t))})]}),r.jsxs("div",{className:"relative",children:[r.jsx(i,{className:"absolute -top-4 -left-2 text-primary/10 w-12 h-12 -rotate-12"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed italic text-lg relative z-10",children:['"',m.language.startsWith("es")?e.text:e.text_en||e.text,'"']})]})]},a))}):r.jsx("div",{className:"p-12 text-center bg-white dark:bg-white/5 rounded-[2.5rem] border border-dashed border-gray-200 dark:border-white/10",children:r.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-widest text-sm",children:m.language.startsWith("es")?"S√© el primero en compartir tu experiencia":"Be the first to share your experience"})})]}),r.jsx("div",{className:"lg:col-span-2 order-1 lg:order-2",children:r.jsxs("div",{className:"sticky top-32",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx("h2",{className:"text-2xl font-black",children:m.language.startsWith("es")?"Danos tu opini√≥n":"Give us your feedback"}),r.jsx("div",{className:"flex-1 h-px bg-gray-100 dark:bg-white/5"})]}),r.jsx(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},className:"bg-white dark:bg-white/5 border border-black/5 dark:border-white/5 p-8 rounded-[2.5rem] shadow-2xl shadow-black/5 backdrop-blur-sm",children:r.jsxs("form",{onSubmit:async e=>{e.preventDefault(),p("loading");try{if(!(await fetch("/api/save_review.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...w,rating:h,lang:m.language})})).ok)throw new Error("Failed to submit");p("success"),window.scrollTo({top:0,behavior:"smooth"})}catch(r){p("error")}},className:"space-y-6",children:[r.jsxs("div",{className:"text-center pb-6 border-b border-black/5 dark:border-white/5",children:[r.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4",children:c("reviews_page.form.rating")}),r.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(e=>r.jsx("button",{type:"button",onClick:()=>g(e),onMouseEnter:()=>b(e),onMouseLeave:()=>b(0),className:"transition-transform active:scale-90 p-1",children:r.jsx(s,{size:32,fill:(u||h)>=e?"#FBBF24":"transparent",className:(u||h)>=e?"text-yellow-400":"text-gray-300 dark:text-gray-600"})},e))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:_,children:c("reviews_page.form.name")}),r.jsx("input",{id:"name",type:"text",required:!0,className:k,value:w.name,onChange:e=>N({...w,name:e.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"tour_type",className:_,children:c("reviews_page.form.tour_type")}),r.jsxs("select",{id:"tour_type",required:!0,className:k,value:w.tour_type,onChange:e=>N({...w,tour_type:e.target.value}),children:[r.jsx("option",{value:"ubud_central",children:c("reviews_page.form.tours.ubud_central")}),r.jsx("option",{value:"ubud_north",children:c("reviews_page.form.tours.ubud_north")}),r.jsx("option",{value:"lovina",children:c("reviews_page.form.tours.lovina")}),r.jsx("option",{value:"east",children:c("reviews_page.form.tours.east")}),r.jsx("option",{value:"lempuyang",children:c("reviews_page.form.tours.lempuyang")}),r.jsx("option",{value:"transfer",children:c("reviews_page.form.tours.transfer")}),r.jsx("option",{value:"custom",children:c("reviews_page.form.tours.custom")})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"country",className:_,children:c("reviews_page.form.country")}),r.jsx("select",{id:"country",required:!0,className:k,value:w.country,onChange:e=>N({...w,country:e.target.value}),children:Object.entries(c("reviews_page.form.countries",{returnObjects:!0})).map(([e,a])=>r.jsx("option",{value:e,children:a},e))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"comment",className:_,children:c("reviews_page.form.comment")}),r.jsx("textarea",{id:"comment",required:!0,rows:4,placeholder:c("reviews_page.form.comment_placeholder"),className:`${k} resize-none`,value:w.comment,onChange:e=>N({...w,comment:e.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"ig_user",className:_,children:c("reviews_page.form.ig_user")}),r.jsxs("div",{className:"relative",children:[r.jsx(t,{size:20,className:"absolute left-5 top-1/2 -translate-y-1/2 text-gray-400"}),r.jsx("input",{id:"ig_user",type:"text",placeholder:c("reviews_page.form.ig_placeholder"),className:`${k} pl-14`,value:w.ig_user,onChange:e=>N({...w,ig_user:e.target.value})})]})]}),r.jsxs("div",{className:"p-4 rounded-2xl border-2 transition-all cursor-pointer flex items-start gap-4 "+(w.auth?"bg-primary/5 border-primary shadow-sm":"bg-white dark:bg-white/5 border-black/5 dark:border-white/5 hover:border-primary/30"),onClick:()=>N({...w,auth:!w.auth}),children:[r.jsx("div",{className:"mt-1 min-w-[20px] h-5 rounded-lg border-2 transition-colors flex items-center justify-center "+(w.auth?"bg-primary border-primary":"border-black/10 dark:border-white/10"),children:w.auth&&r.jsx(a,{size:12,className:"text-white"})}),r.jsx("p",{className:"text-[11px] font-bold transition-colors "+(w.auth?"text-primary":"text-gray-600 dark:text-gray-400"),children:c("reviews_page.form.auth")})]})]}),"error"===x&&r.jsxs(d.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 p-4 rounded-xl text-red-600 dark:text-red-400 text-xs font-bold text-center",children:[c("common.error"),". Por favor, int√©ntalo de nuevo."]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("button",{type:"submit",disabled:"loading"===x,className:"w-full py-4 rounded-2xl font-black text-base transition-all flex items-center justify-center gap-3 "+("loading"===x?"bg-gray-100 dark:bg-white/5 text-gray-400 cursor-not-allowed":"btn-primary shadow-xl shadow-primary/20"),children:"loading"===x?r.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(l,{size:18}),c("reviews_page.form.submit")]})}),r.jsx("p",{className:"text-[9px] text-center text-gray-400 font-medium px-4",children:c("reviews_page.form.implicit_consent")})]})]})})]})})]})]})]})};export{c as default};
